import{_ as E,r as i,o as k,t as B,x as C,v as T}from"./D8Jt2rZV.js";const P={class:"container"},M=4,n=150,X={__name:"index",setup(Y){const l=i(null),h=i(null),u=i([]),p=["images/icon1.png","images/icon2.png","images/icon3.png","images/icon4.png"],v=i(0);let d=i(!1),o=i(null),g=i(!1);const x=()=>{u.value=[];let e=[];d.value=!1;let a=0;for(let t=0;t<M;t++){const s=p[t%p.length];e.push({image:s,x:Math.random()*(l.value.width-n),y:Math.random()*(l.value.height-n),width:n,height:n,img:new Image}),e.push({image:s,x:Math.random()*(l.value.width-n),y:Math.random()*(l.value.height-n),width:n,height:n,img:new Image})}e.forEach(t=>{t.img.src=t.image,t.img.onload=()=>{a++,a===e.length&&(d.value=!0,r())}}),u.value=e},r=()=>{h.value&&d.value&&(h.value.clearRect(0,0,l.value.width,l.value.height),u.value.forEach(e=>{h.value.drawImage(e.img,e.x,e.y,e.width,e.height)}))},w=e=>{const a=l.value.getBoundingClientRect(),t=l.value.width/a.width,s=l.value.height/a.height;let c,f;return e.touches?(c=(e.touches[0].clientX-a.left)*t,f=(e.touches[0].clientY-a.top)*s):(c=(e.clientX-a.left)*t,f=(e.clientY-a.top)*s),{x:c,y:f}},_=e=>{e.preventDefault();const{x:a,y:t}=w(e);o.value=u.value.find(s=>a>=s.x&&a<=s.x+s.width&&t>=s.y&&t<=s.y+s.height),o.value&&(g.value=!0)},y=e=>{if(e.preventDefault(),g.value&&o.value){const{x:a,y:t}=w(e);o.value.x=Math.max(0,Math.min(a-o.value.width/2,l.value.width-o.value.width)),o.value.y=Math.max(0,Math.min(t-o.value.height/2,l.value.height-o.value.height)),r(),I()}},m=()=>{g.value=!1,o.value=null},I=()=>{u.value.forEach(e=>{if(o.value&&e!==o.value&&e.image===o.value.image){const a=e.x-o.value.x,t=e.y-o.value.y;Math.sqrt(a*a+t*t)<10&&(D(),u.value=u.value.filter(c=>c!==e&&c!==o.value),v.value++,r())}}),v.value===M&&setTimeout(()=>{v.value=0,x()},1e3)},D=()=>{new Audio("sounds/match.mp3").play()};return k(()=>{l.value&&(l.value.width=800,l.value.height=600,h.value=l.value.getContext("2d"),x())}),(e,a)=>(T(),B("div",P,[C("canvas",{ref_key:"canvas",ref:l,onMousedown:_,onMousemove:y,onMouseup:m,onMouseleave:m,onTouchstart:_,onTouchmove:y,onTouchend:m,class:"game-canvas"},null,544)]))}},S=E(X,[["__scopeId","data-v-42854ed7"]]);export{S as default};
