import{_ as D,r as c,o as E,t as k,x as B,v as C}from"./DO_KZNVH.js";const T={class:"container"},y=4,u=100,P={__name:"index",setup(R){const o=c(null),h=c(null),i=c([]),f=["images/icon1.png","images/icon2.png","images/icon3.png","images/icon4.png"],v=c(0);let g=c(!1),t=c(null),d=c(!1);const p=()=>{i.value=[];let e=[];g.value=!1;let l=0;for(let a=0;a<y;a++){const s=f[a%f.length],n=u;e.push({image:s,x:n+Math.random()*(o.value.width-u-n*2),y:n+Math.random()*(o.value.height-u-n*2),width:u,height:u,img:new Image}),e.push({image:s,x:n+Math.random()*(o.value.width-u-n*2),y:n+Math.random()*(o.value.height-u-n*2),width:u,height:u,img:new Image})}e.forEach(a=>{a.img.src=a.image,a.img.onload=()=>{l++,l===e.length&&(g.value=!0,r())}}),i.value=e},r=()=>{h.value&&g.value&&(h.value.clearRect(0,0,o.value.width,o.value.height),i.value.forEach(e=>{h.value.drawImage(e.img,e.x,e.y,e.width,e.height)}))},x=e=>{const l=o.value.getBoundingClientRect();let a,s;return e.touches?(a=e.touches[0].clientX-l.left,s=e.touches[0].clientY-l.top):(a=e.clientX-l.left,s=e.clientY-l.top),{x:a,y:s}},w=e=>{e.preventDefault();const{x:l,y:a}=x(e);t.value=i.value.find(s=>l>=s.x&&l<=s.x+s.width&&a>=s.y&&a<=s.y+s.height),t.value&&(d.value=!0)},_=e=>{if(e.preventDefault(),d.value&&t.value){const{x:l,y:a}=x(e);t.value.x=Math.max(0,Math.min(l-t.value.width/2,o.value.width-t.value.width)),t.value.y=Math.max(0,Math.min(a-t.value.height/2,o.value.height-t.value.height)),r(),M()}},m=()=>{d.value=!1,t.value=null},M=()=>{i.value.forEach(e=>{if(t.value&&e!==t.value&&e.image===t.value.image){const l=e.x-t.value.x,a=e.y-t.value.y;Math.sqrt(l*l+a*a)<10&&(I(),i.value=i.value.filter(n=>n!==e&&n!==t.value),v.value++,r())}}),v.value===y&&setTimeout(()=>{v.value=0,p()},1e3)},I=()=>{new Audio("sounds/match.mp3").play()};return E(()=>{o.value&&(o.value.width=800,o.value.height=600,h.value=o.value.getContext("2d"),p())}),(e,l)=>(C(),k("div",T,[B("canvas",{ref_key:"canvas",ref:o,onMousedown:w,onMousemove:_,onMouseup:m,onMouseleave:m,onTouchstart:w,onTouchmove:_,onTouchend:m,class:"game-canvas"},null,544)]))}},Y=D(P,[["__scopeId","data-v-7979ff95"]]);export{Y as default};
