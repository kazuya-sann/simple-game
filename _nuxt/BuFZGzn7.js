import{r as u,o as M,t as D,x as E,v as k}from"./D-m8kpbq.js";const B={class:"game-container"},w=4,P={__name:"index",setup(C){const n=u(null),c=u(null),s=u([]),d=["images/icon1.png","images/icon2.png","images/icon3.png","images/icon4.png"],i=u(0);let v=u(!1),l=u(null),g=u(!1);const m=()=>{s.value=[];let e=[];v.value=!1;let t=0;for(let a=0;a<w;a++){const o=d[a%d.length];e.push({image:o,x:Math.random()*700,y:Math.random()*500,width:100,height:100,img:new Image}),e.push({image:o,x:Math.random()*700,y:Math.random()*500,width:100,height:100,img:new Image})}e.forEach(a=>{a.img.src=a.image,a.img.onload=()=>{t++,t===e.length&&(v.value=!0,r())}}),s.value=e},r=()=>{c.value&&v.value&&(c.value.clearRect(0,0,n.value.width,n.value.height),s.value.forEach(e=>{c.value.drawImage(e.img,e.x,e.y,e.width,e.height)}))},f=e=>{const t=n.value.getBoundingClientRect();let a,o;return e.touches?(a=e.touches[0].clientX-t.left,o=e.touches[0].clientY-t.top):(a=e.clientX-t.left,o=e.clientY-t.top),{x:a,y:o}},p=e=>{e.preventDefault();const{x:t,y:a}=f(e);l.value=s.value.find(o=>t>=o.x&&t<=o.x+o.width&&a>=o.y&&a<=o.y+o.height),l.value&&(g.value=!0)},x=e=>{if(e.preventDefault(),g.value&&l.value){const{x:t,y:a}=f(e);l.value.x=t-l.value.width/2,l.value.y=a-l.value.height/2,r(),_()}},h=()=>{g.value=!1,l.value=null},_=()=>{s.value.forEach(e=>{if(l.value&&e!==l.value&&e.image===l.value.image){const t=e.x-l.value.x,a=e.y-l.value.y;Math.sqrt(t*t+a*a)<10&&(I(),s.value=s.value.filter(y=>y!==e&&y!==l.value),i.value++,r())}}),i.value===w&&setTimeout(()=>{i.value=0,m()},1e3)},I=()=>{new Audio("sounds/match.mp3").play()};return M(()=>{n.value&&(n.value.width=800,n.value.height=600,c.value=n.value.getContext("2d"),m())}),(e,t)=>(k(),D("div",B,[E("canvas",{ref_key:"canvas",ref:n,onMousedown:p,onMousemove:x,onMouseup:h,onMouseleave:h,onTouchstart:p,onTouchmove:x,onTouchend:h},null,544)]))}};export{P as default};
